<h2><%= title %></h2>
<hr>
<div>
	<label>
		員工編號：<input type="text" id="employee-id" disabled></input>
	</label>
</div>
<div>
	<label>
		排班日期：<input type="text" id="date" disabled></input>
	</label>
</div>
<hr>
<table class="table table-striped table-bordered" style="width: 90%; text-align: center; font-family: 微軟正黑體">
	<tr><td></td><td id='th_0'></td><td id='th_1'></td><td id='th_2'></td><td id='th_3'></td><td id='th_4'></td><td id='th_5'></td><td id='th_6'></td></tr>
	<tr><td>9:00</td><td id='t_0_19'></td><td id='t_1_19'></td><td id='t_2_19'></td><td id='t_3_19'></td><td id='t_4_19'></td><td id='t_5_19'></td><td id='t_6_19'></td></tr>
	<tr><td>9:30</td><td id='t_0_20'></td><td id='t_1_20'></td><td id='t_2_20'></td><td id='t_3_20'></td><td id='t_4_20'></td><td id='t_5_20'></td><td id='t_6_20'></td></tr>
	<tr><td>10:00</td><td id='t_0_21'></td><td id='t_1_21'></td><td id='t_2_21'></td><td id='t_3_21'></td><td id='t_4_21'></td><td id='t_5_21'></td><td id='t_6_21'></td></tr>
	<tr><td>10:30</td><td id='t_0_22'></td><td id='t_1_22'></td><td id='t_2_22'></td><td id='t_3_22'></td><td id='t_4_22'></td><td id='t_5_22'></td><td id='t_6_22'></td></tr>
	<tr><td>11:00</td><td id='t_0_23'></td><td id='t_1_23'></td><td id='t_2_23'></td><td id='t_3_23'></td><td id='t_4_23'></td><td id='t_5_23'></td><td id='t_6_23'></td></tr>
	<tr><td>11:30</td><td id='t_0_24'></td><td id='t_1_24'></td><td id='t_2_24'></td><td id='t_3_24'></td><td id='t_4_24'></td><td id='t_5_24'></td><td id='t_6_24'></td></tr>
	<tr><td>12:00</td><td id='t_0_25'></td><td id='t_1_25'></td><td id='t_2_25'></td><td id='t_3_25'></td><td id='t_4_25'></td><td id='t_5_25'></td><td id='t_6_25'></td></tr>
	<tr><td>12:30</td><td id='t_0_26'></td><td id='t_1_26'></td><td id='t_2_26'></td><td id='t_3_26'></td><td id='t_4_26'></td><td id='t_5_26'></td><td id='t_6_26'></td></tr>
	<tr><td>13:00</td><td id='t_0_27'></td><td id='t_1_27'></td><td id='t_2_27'></td><td id='t_3_27'></td><td id='t_4_27'></td><td id='t_5_27'></td><td id='t_6_27'></td></tr>
	<tr><td>13:30</td><td id='t_0_28'></td><td id='t_1_28'></td><td id='t_2_28'></td><td id='t_3_28'></td><td id='t_4_28'></td><td id='t_5_28'></td><td id='t_6_28'></td></tr>
	<tr><td>14:00</td><td id='t_0_29'></td><td id='t_1_29'></td><td id='t_2_29'></td><td id='t_3_29'></td><td id='t_4_29'></td><td id='t_5_29'></td><td id='t_6_29'></td></tr>
	<tr><td>14:30</td><td id='t_0_30'></td><td id='t_1_30'></td><td id='t_2_30'></td><td id='t_3_30'></td><td id='t_4_30'></td><td id='t_5_30'></td><td id='t_6_30'></td></tr>
	<tr><td>15:00</td><td id='t_0_31'></td><td id='t_1_31'></td><td id='t_2_31'></td><td id='t_3_31'></td><td id='t_4_31'></td><td id='t_5_31'></td><td id='t_6_31'></td></tr>
	<tr><td>15:30</td><td id='t_0_32'></td><td id='t_1_32'></td><td id='t_2_32'></td><td id='t_3_32'></td><td id='t_4_32'></td><td id='t_5_32'></td><td id='t_6_32'></td></tr>
	<tr><td>16:00</td><td id='t_0_33'></td><td id='t_1_33'></td><td id='t_2_33'></td><td id='t_3_33'></td><td id='t_4_33'></td><td id='t_5_33'></td><td id='t_6_33'></td></tr>
	<tr><td>16:30</td><td id='t_0_34'></td><td id='t_1_34'></td><td id='t_2_34'></td><td id='t_3_34'></td><td id='t_4_34'></td><td id='t_5_34'></td><td id='t_6_34'></td></tr>
	<tr><td>17:00</td><td id='t_0_35'></td><td id='t_1_35'></td><td id='t_2_35'></td><td id='t_3_35'></td><td id='t_4_35'></td><td id='t_5_35'></td><td id='t_6_35'></td></tr>
	<tr><td>17:30</td><td id='t_0_36'></td><td id='t_1_36'></td><td id='t_2_36'></td><td id='t_3_36'></td><td id='t_4_36'></td><td id='t_5_36'></td><td id='t_6_36'></td></tr>
	<tr><td>18:00</td><td id='t_0_37'></td><td id='t_1_37'></td><td id='t_2_37'></td><td id='t_3_37'></td><td id='t_4_37'></td><td id='t_5_37'></td><td id='t_6_37'></td></tr>
	<tr><td>18:30</td><td id='t_0_38'></td><td id='t_1_38'></td><td id='t_2_38'></td><td id='t_3_38'></td><td id='t_4_38'></td><td id='t_5_38'></td><td id='t_6_38'></td></tr>
	<tr><td>19:00</td><td id='t_0_39'></td><td id='t_1_39'></td><td id='t_2_39'></td><td id='t_3_39'></td><td id='t_4_39'></td><td id='t_5_39'></td><td id='t_6_39'></td></tr>
	<tr><td>19:30</td><td id='t_0_40'></td><td id='t_1_40'></td><td id='t_2_40'></td><td id='t_3_40'></td><td id='t_4_40'></td><td id='t_5_40'></td><td id='t_6_40'></td></tr>
	<tr><td>20:00</td><td id='t_0_41'></td><td id='t_1_41'></td><td id='t_2_41'></td><td id='t_3_41'></td><td id='t_4_41'></td><td id='t_5_41'></td><td id='t_6_41'></td></tr>
	<tr><td>20:30</td><td id='t_0_42'></td><td id='t_1_42'></td><td id='t_2_42'></td><td id='t_3_42'></td><td id='t_4_42'></td><td id='t_5_42'></td><td id='t_6_42'></td></tr>
	<tr><td>21:00</td><td id='t_0_43'></td><td id='t_1_43'></td><td id='t_2_43'></td><td id='t_3_43'></td><td id='t_4_43'></td><td id='t_5_43'></td><td id='t_6_43'></td></tr>
	<tr><td>21:30</td><td id='t_0_44'></td><td id='t_1_44'></td><td id='t_2_44'></td><td id='t_3_44'></td><td id='t_4_44'></td><td id='t_5_44'></td><td id='t_6_44'></td></tr>
</table>

<script>
	$.ajax({
		type: 'get',
		url: '/data/employee/schedule/table',
		dataType: 'json',
		data: { id: <%= scheduleId %> },
		success: function(data) {
			data.data.forEach(function(row) {
				for (var i = row.start_time_id; i <= row.finish_time_id; i++) {
					if (row.schedule_id == <%= scheduleId %>) {
						$('#t_' + row.day_of_week + '_' + i).css({
							'background-color': 'rgb(255, 161, 161)',
							'border': '0'
						});
					} else {
						$('#t_' + row.day_of_week + '_' + i).css({
							'background-color': 'rgb(139, 209, 218)',
							'border': '0'
						});
					}
					
				}
				$('#t_' + row.day_of_week + '_' + row.start_time_id).html(row.type);
			});
		},
		error: function() {
		}
	});
	
	var weekDay = ['日', '一', '二', '三', '四', '五', '六'];
	$.ajax({
		type: 'get',
		url: '/data/employee/schedule/info',
		dataType: 'json',
		data: { id: <%= scheduleId %> },
		success: function(data) {
			console.log(data.data[0]);
			$('#employee-id').val(data.data[0].employee_std_id);
			var today = new Date(data.data[0].date);
			$('#date').val(today.format('Y-m-d'));
			
			var startOfWeek = new Date(today.getTime() - 86400000 * today.getDay());
			for (var i = 0; i < 7; i++) {
				var date = new Date(startOfWeek.getTime() + 86400000 * i);
				$('#th_' + i).html(date.format('m/d') + ' (' + weekDay[i] + ')');
			}
		},
		error: function() {
		}
	});
</script>